<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Math Q&A Viewer</title>

<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>

<style>
  .katex { margin: 0 0.25rem; }
  .fade { transition: opacity 0.2s ease-in-out; }
</style>
</head>
<body class="bg-rose-50 min-h-screen flex items-center justify-center p-6">

<div class="w-full max-w-5xl bg-white border border-rose-200 rounded-2xl shadow-lg p-8 space-y-6">

  <!-- Question -->
  <div id="question" class="text-center text-rose-700 text-2xl font-semibold"></div>

  <!-- Solution -->
  <div id="solutionArea" class="bg-fuchsia-50 text-fuchsia-800 p-6 rounded-xl min-h-[220px] text-lg leading-relaxed whitespace-pre-wrap fade">
    Click “Next” to start the solution.
  </div>

  <!-- Navigation -->
  <div class="flex justify-between items-center">
    <button id="prevBtn" class="px-4 py-2 bg-rose-400 text-white rounded-md hover:bg-rose-500 disabled:opacity-50" disabled>Previous</button>
    <button id="nextBtn" class="px-4 py-2 bg-fuchsia-500 text-white rounded-md hover:bg-fuchsia-600">Next</button>
  </div>

  <!-- Prompt Box -->
  <div id="promptPanel" class="bg-pink-50 border border-pink-200 rounded-xl p-4 space-y-4">
    <div class="flex justify-between items-center">
      <div class="flex items-center gap-2">
        <label class="text-sm text-gray-700">Text color:</label>
        <select id="colorSelect" class="border border-pink-300 rounded-md px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-pink-300">
          <option value="text-teal-800">teal</option>
          <option value="text-purple-700">Purple</option>
          <option value="text-red-700">red</option>
        </select>
        <button id="clearNotes" class="px-3 py-1 bg-pink-400 text-white rounded-md hover:bg-pink-500 text-sm">Clear</button>
      </div>
    </div>

    <textarea id="promptInput" rows="6" placeholder="Write your notes here..." class="w-full text-2xl text-center justify-center p-3 border border-pink-300 rounded-md focus:outline-none focus:ring-2 focus:ring-pink-300 text-gray-800"></textarea>
  </div>

</div>

<script>
 const data = {
  question: "A light inextensible string is wrapped around a solid cylindrical pulley of radius $R$ and moment of inertia $I$ about its axis. Two masses $m_1$ and $m_2$ ($m_1>m_2$) hang from the two ends of the string and are released from rest. Assuming the string does not slip on the pulley, find (a) the linear acceleration $a$ of the masses, (b) the angular acceleration $\\alpha$ of the pulley, (c) the tensions $T_1$ and $T_2$ in the two sides of the string, (d) the speed $v$ of the masses after $m_1$ descends a distance $h$, and (e) the condition on $m_1,m_2,I,R$ for the no-slip assumption to be valid.",
  steps: [
    "Draw free-body diagrams. For mass $m_1$ (descending) the forces along vertical: $m_1 g$ (down) and $T_1$ (up). For mass $m_2$ (ascending): $T_2$ (up) and $m_2 g$ (down). On the pulley the net torque is due to $T_1$ and $T_2$.",
    "Write Newton's second law for translation of each mass (taking downward positive for $m_1$ and upward positive for $m_2$): \\\\ $$m_1 a = m_1 g - T_1, \\qquad m_2 a = T_2 - m_2 g.$$ \\\\ Here $a$ is the magnitude of linear acceleration of each mass (same for both since string is inextensible).",
    "Write rotational equation for the pulley. Taking counterclockwise as positive (choose sign consistent with motion): the net torque from tensions is $$\\tau = (T_1 - T_2)R$$ (since $T_1$ tends to rotate pulley one way, $T_2$ the opposite). Using $\\tau = I\\alpha$, we get: \\\\ $$ (T_1 - T_2)R = I\\alpha. $$",
    "Use the no-slip (pure rolling between string and pulley) condition that relates linear acceleration and angular acceleration: \\\\ $$ a = \\alpha R \\quad\\Rightarrow\\quad \\alpha = a/R.$$",
    "Substitute $\\alpha$ into the rotational equation to eliminate $\\alpha$: \\\\ $$ (T_1 - T_2)R = I \\frac{a}{R} \\quad\\Rightarrow\\quad T_1 - T_2 = \\frac{I}{R^2}a. $$",
    "Now we have three linear equations in unknowns $T_1,T_2,a$: \\\\ $$m_1 a = m_1 g - T_1, \\qquad m_2 a = T_2 - m_2 g, \\qquad T_1 - T_2 = \\frac{I}{R^2}a.$$",
    "Eliminate $T_1$ and $T_2$. From the first two: $$T_1 = m_1 g - m_1 a, \\qquad T_2 = m_2 g + m_2 a.$$ Substitute into the difference equation: \\\\ $$ (m_1 g - m_1 a) - (m_2 g + m_2 a) = \\frac{I}{R^2}a. $$",
    "Collect terms and solve for $a$: \\\\ $$ m_1 g - m_2 g - (m_1 + m_2)a = \\frac{I}{R^2}a. $$ \\\\ Rearranged: $$ (m_1 - m_2)g = a\\left(m_1 + m_2 + \\frac{I}{R^2}\\right). $$",
    "Therefore the linear acceleration is: \\\\ $$\\boxed{\\;a = \\dfrac{(m_1 - m_2)g}{\\,m_1 + m_2 + I/R^2\\;}}.$$",
    "Angular acceleration of the pulley follows from $\\alpha = a/R$: \\\\ $$\\boxed{\\;\\alpha = \\dfrac{(m_1 - m_2)g}{R\\left(m_1 + m_2 + I/R^2\\right)}\\;}. $$",
    "Find tensions using $T_1 = m_1 g - m_1 a$ and $T_2 = m_2 g + m_2 a$. Substitute $a$: \\\\ $$T_1 = m_1 g - m_1\\cdot\\dfrac{(m_1 - m_2)g}{m_1 + m_2 + I/R^2} = g\\left( m_1 - \\dfrac{m_1(m_1 - m_2)}{m_1 + m_2 + I/R^2} \\right).$$ \\\\ $$T_2 = m_2 g + m_2\\cdot\\dfrac{(m_1 - m_2)g}{m_1 + m_2 + I/R^2} = g\\left( m_2 + \\dfrac{m_2(m_1 - m_2)}{m_1 + m_2 + I/R^2} \\right).$$",
    "These can be simplified to cleaner forms by combining fractions: \\\\ $$T_1 = g\\cdot\\dfrac{m_1(m_1 + m_2 + I/R^2) - m_1(m_1 - m_2)}{m_1 + m_2 + I/R^2} = g\\cdot\\dfrac{m_1(2m_2 + I/R^2)}{m_1 + m_2 + I/R^2},$$ \\\\ $$T_2 = g\\cdot\\dfrac{m_2(m_1 + m_2 + I/R^2) + m_2(m_1 - m_2)}{m_1 + m_2 + I/R^2} = g\\cdot\\dfrac{m_2(2m_1 + I/R^2)}{m_1 + m_2 + I/R^2}.$$",
    "Energy method check (optional): if $m_1$ descends by $h$, work done by gravity is $(m_1 - m_2)gh$ and final kinetic energy (both translational and rotational) is $$K = \\tfrac{1}{2}m_1 v^2 + \\tfrac{1}{2}m_2 v^2 + \\tfrac{1}{2}I\\omega^2.$$ Using $\\omega = v/R$, we get $$K = \\tfrac{1}{2}(m_1 + m_2 + I/R^2)v^2.$$ Equating $(m_1 - m_2)gh = K$ gives the same result for $v$ below.",
    "Hence the speed $v$ after descent $h$ is (from energy conservation): \\\\ $$\\tfrac{1}{2}(m_1 + m_2 + I/R^2)v^2 = (m_1 - m_2)gh \\quad\\Rightarrow\\quad v = \\sqrt{\\dfrac{2(m_1 - m_2)gh}{m_1 + m_2 + I/R^2}}.$$ \\\\ So $$\\boxed{\\;v = \\sqrt{\\dfrac{2(m_1 - m_2)gh}{m_1 + m_2 + I/R^2}}\\; }.$$",
    "No-slip (static friction) validity: the string transmits tensions $T_1,T_2$ producing torque $(T_1-T_2)R$ on the pulley. For no slip the string exerts static frictional force at the contact sufficient to supply this torque. If the string–pulley contact can support a maximum frictional force $f_{\\max}$, then the difference in tensions must satisfy $T_1 - T_2 \\le f_{\\max}$. In many ideal problems the string is assumed massless and does not slip if the material/connection allows arbitrary tension difference; physically one requires the contact friction capability between string and pulley (or adequate wrap).",
    "Quantitative no-slip condition if the string can support a maximum friction coefficient $\\mu_s$ with normal $N$ (idealized): require $$T_1 - T_2 = \\frac{I}{R^2}a \\le f_{\\max} = \\mu_s N.$$ If $N$ is the normal between string and pulley (model-dependent) one plugs in values. In absence of detailed friction model the standard requirement is simply that the calculated $a$ satisfies the mechanism's friction limits; otherwise slipping occurs and the above formula for $a$ is invalid.",
    "Special case: for a solid cylindrical pulley $I = \\tfrac{1}{2}M_p R^2$ (where $M_p$ is pulley mass). Then $I/R^2 = M_p/2$ and acceleration becomes $$a = \\dfrac{(m_1 - m_2)g}{m_1 + m_2 + M_p/2}.$$",
    "Summary (boxed results): \\\\ " +
    "$$\\boxed{\\;a = \\dfrac{(m_1 - m_2)g}{m_1 + m_2 + I/R^2}\\;}, \\qquad \\boxed{\\;\\alpha = \\dfrac{a}{R}\\;}, \\qquad \\boxed{\\;v = \\sqrt{\\dfrac{2(m_1 - m_2)gh}{m_1 + m_2 + I/R^2}}\\;}$$ \\\\ " +
    "and tensions $$\\boxed{\\;T_1 = g\\cdot\\dfrac{m_1(2m_2 + I/R^2)}{m_1 + m_2 + I/R^2}, \\quad T_2 = g\\cdot\\dfrac{m_2(2m_1 + I/R^2)}{m_1 + m_2 + I/R^2}\\; }.$$"
  ]
}





const q = document.getElementById("question")
const s = document.getElementById("solutionArea")
const next = document.getElementById("nextBtn")
const prev = document.getElementById("prevBtn")
const promptInput = document.getElementById("promptInput")
const colorSelect = document.getElementById("colorSelect")
const clearNotes = document.getElementById("clearNotes")

let step = -1

function renderMath(text) {
  const inline = /\$([^\$]+)\$/g
  const block = /\$\$([\s\S]+?)\$\$/g
  return text
    .replace(block, (_, exp) => katex.renderToString(exp, { displayMode: true }))
    .replace(inline, (_, exp) => katex.renderToString(exp, { displayMode: false }))
}

function showQuestion() {
  q.innerHTML = renderMath(data.question)
}

function showStep(index) {
  if (index < 0 || index >= data.steps.length) return
  step = index
  s.classList.add("opacity-0")
  setTimeout(() => {
    s.innerHTML = renderMath(data.steps[step])
    s.classList.remove("opacity-0")
  }, 150)
  prev.disabled = step === 0
  next.disabled = step === data.steps.length - 1
}

next.addEventListener("click", () => {
  if (step < data.steps.length - 1) showStep(step + 1)
})
prev.addEventListener("click", () => {
  if (step > 0) showStep(step - 1)
})

colorSelect.addEventListener("change", () => {
  promptInput.className = `w-full text-2xl text-center justify-center p-3 border border-pink-300 rounded-md focus:outline-none focus:ring-2 focus:ring-pink-300 ${colorSelect.value}`
})

clearNotes.addEventListener("click", () => {
  promptInput.value = ""
})

document.addEventListener("DOMContentLoaded", () => {
  showQuestion()
})
</script>

</body>
</html>
